#!/bin/sh
#
#	$Id: tnldown,v 1.9 1999/10/13 21:28:40 kloczek Exp $
#
# Author: Arkadiusz Mi¶kiewicz <misiek@pld.org.pl>
#

cd /etc/sysconfig/network-scripts
. /etc/sysconfig/network-scripts/.functions
. /etc/sysconfig/network

CONFIG=$1

[ -z "$CONFIG" ] && {
    echo "usage: tnldown <device name>" >&2
    exit 1
}

[ -f "/etc/sysconfig/interfaces/$CONFIG" ] || CONFIG=tnlcfg-$CONFIG
[ -f "/etc/sysconfig/interfaces/$CONFIG" ] || {
    echo "usage: tnldown <device name>" >&2
    exit 1
}

source_config

if [ "foo$2" = "fooboot" -a "${ONBOOT}" = "no" ]
then
        exit
fi

if [ "${IPV6_TUNNELCONFIG}" != "yes" ] && [ "${MODE}" = "sit" ] || \
   [ "${IPX}" != "yes" ] && [ "${MODE}" = "ipxip" ] || \
   [ "${IPX}" != "yes" ] && [ "${MODE}" = "ipipx" ]
then
        exit
fi

if [ "${MODE}" = "ipip" ] || [ "${MODE}" = "sit" ] || [ "${MODE}" = "gre" ]; then

	ip tunnel del ${DEVICE}

elif [ "${MODE}" = "ipxip" ] || [ "${MODE}" = "ipipx" ]; then

echo "obs³uga ipxip jeszcze nie zrobiona"

fi
