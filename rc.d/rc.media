#!/bin/sh

. /etc/sysconfig/system

# This script chnges on start up permission on /dev/hd? depending
# IDE devices media type.

if [ "$DO_AUTO_SETUP_MEDIA" = "yes" ]; then
    for i in `(cd /dev; ls -a hd?)`; do
	if [ -f /proc/ide/$i/media -a `cat /proc/ide/$i/media` = "cdrom" ];
	    then
		# if deveice is cdrom change permission to allow read for
		# all
		chmod 664 /dev/$i
	    else
		chmod 660 /dev/$i
	fi
    done
fi