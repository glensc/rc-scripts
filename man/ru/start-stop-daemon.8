.\" Hey, Emacs!  This is an -*- nroff -*- source file.
.\"
.\" Updated by <alexm@hsys.msk.ru> to r1.11 of start-stop-daemon.8 from CVS
.\"
.TH START\-STOP\-DAEMON 8 "15 марта 1997" "Debian Project" "Debian GNU/Linux"
.SH ИМЯ
start\-stop\-daemon \- запуск и остановка системных программ-демонов
.SH ОБЗОР
.B start-stop-daemon
.BR -S|--start
.I флаги
.RB [ \-\- ]
.IR аргументы
.HP
.B start-stop-daemon
.BR -K|--stop
.IR "флаги ..."
.HP
.B start-stop-daemon
.BR -H|--help
.HP
.B start-stop-daemon
.BR -V|--version
.SH ОПИСАНИЕ
.B start\-stop\-daemon
используется для управления созданием и завершением системных процессов.
Используя флаги
.BR --exec ,
.BR --pidfile ,
.BR --user ,
и
.BR --name , 
.B start\-stop\-daemon
может быть настроен для поиска уже запущенных экземпляров
процесса.

.B start\-stop\-daemon
с флагом
.B --start
проверяет существование указанного процесса. Если такой процесс существует,
.B start\-stop\-daemon
ничего не делает и прекращает работу с кодом завершения\~1 (или\~0, если задан
флаг
.BR --oknodo ).  
Если же такой процесс не существует, то он запускается, используя либо
исполняемый файл, заданный флагом
.BR --exec ,
либо флагом
.BR --startas ,
если он задан).
Аргументы, заданные в командной строке после
.BR -- ,
будут без изменений переданы запускаемой программе.
Если указан флаг
.BR --retry ,
то
.B start-stop-daemon
станет отслеживать завершение процесса(ов).

.B start\-stop\-daemon
с флагом
.BR --stop
также проверяет существование заданного процесса.
Если такой процесс существует, то
.B start\-stop\-daemon
посылает ему сигнал, заданный флагом
.BR --signal ,
и прекращает работу с кодом завершения\~0.
Если же такой процесс не существует, то
.B start\-stop\-daemon
прекращает работу с кодом завершения\~1 (или\~0, если задан флаг
.BR --oknodo ).  

.SH ФЛАГИ

.TP
\fB-x\fP|\fB--exec\fP \fIисполняемый_файл\fP
Проверяет процессы, которые являются экземплярами данного исполняемого файла
(согласно 
.BR /proc/\fP\fIpid\fB/exe ).
.TP
\fB-p\fP|\fB--pidfile\fP \fIpid-файл\fP
Проверяет процессы, чьи идентификаторы процесса записаны в
.IR pid-файл .
.TP
\fB-u\fP|\fB--user\fP \fIимя_пользователя\fP|\fIuid\fP
Проверяет процессы, принадлежащие пользователю, указанному с помощью
.I имени_пользователя
или
.IR uid .
.TP
\fB-n\fP|\fB--name\fP \fIprocess-name\fP
Проверяет процессы с именем
.I process-name
(согласно
.BR /proc/\fP\fIpid\fB/stat ).
.TP
\fB-s\fP|\fB--signal\fP \fIsignal\fP
При использовании вместе с флагом
.BR --stop ,
задаёт сигнал, который будет послан процессам для их останова
(по умолчанию\~15).
.TP
\fB-R\fP|\fB--retry\fP \fIтайм-аут\fP|\fIзатем\fP
При использовании вместе с флагом
.B --stop
указывает, что
.B start-stop-daemon
должен проверять следить за правильным завершением процесса.
Периодически будет проверяться, выполняются ли ещё указанные процессы,
до тех пор, пока все они не завершатся.  Если процессы не завершаются,
то будет предпринято действие, заданное в параметре
.IR затем .

Если вместо параметра
.I затем
указан
.IR тайм-аут ,
то используется последовательность действий
.IB сигнал / timeout /KILL/ timeout\fR,
где
.IR signal "\~--"
это сигнал, заданный флагом
.BR --signal .

Вообще, параметр
.IR затем "\~--"
это последовательность из не менее двух элементов, разделённых косой
чертой
.RB ( / );
причём каждый элемент -- это либо
.BI - номер-сигнала
или [\fB-\fP]\fIназвание-сигнала\fP,
или
.IR тайм-аут ,
задающий количество секунд, в течение которых следует ждать завершения
процесса, или же слово
.BR forever ,
предписывающее повторять остаток последовательности до предела, если
нужно.

Если достигнут конец последовательности действий, а
.B forever
не было указано, то
.B start-stop-daemon
прекращает работу с кодом завершения\~2.
Если параметр
.I затем
указан, то сигнал, заданный с помощью флага
.BR --signal ,
игнорируется.

.TP
\fB-a\fP|\fB--startas\fP \fIполное_имя\fP
При использовании с флагом
.B --start
запускает процесс, указанный в параметре
.IR полное_имя .
Если этот флаг не задан, то берётся аргумент, заданный флагом
.BR --exec .
.TP
.BR -t | --test
Напечатать действия, которые должны быть выполнены и установить соответствующий
код завершения, но не выполнять эти действия.
.TP
.BR -o | --oknodo
Возвращать код\~0 вместо\~1, если не было выполнено (или не должно
было быть выполнено) никаких действий.
.TP
.BR -q | --quiet
Не выдавать информационных сообщений; только сообщения об ошибках.
.TP
\fB-c\fP|\fB--chuid\fP \fIимя-пользователя\fR|\fIuid\fP
Установить данное имя пользователя или uid перед запуском процесса.  Вы можете
также задать группу, добавив двоеточие
.BR : ,
и имя группы или gid, как в команде `chown'
(\fIпользователь\fP\fB:\fP\fIгруппа\fP).
При использовании этого флага вы должны понимать, что основная и
дополнительные группы будут установлены, даже если не задан флаг
.BR --group .
Флаг
.B --group
используется только для групп, в которых пользователь обычно не
состоит (например, в случае с системным пользователем `nobody').
.TP
\fB-r\fP|\fB--chroot\fB \fIroot\fP
Перед запуском процесса перейти в каталог
.I root
и сделать его корневым (с помощью
.BR chroot ).
Заметьте, что pid-файл будет создан после установки нового корневого
каталога.
.TP
.BR -b | --background
Этот флаг обычно используется с программами, которые не могут сами
отключиться от терминала, на котором они запущены.  Этот флаг заставит
.B start-stop-daemon
сделать fork() перед запуском процесса и уйти в фоновый режим.
.B ВНИМАНИЕ: start-stop-daemon
не может проверить код возврата, если процесс не может успешно выполниться по
.I какой бы то ни было
причине.  Это\~-- последняя возможность, предназначенная только для
программ, которым не имеет смысла выполнять fork() самим, или если нет
возможности добавить в них код для этого.
.TP
.BR -n | --nicelevel
Этот флаг перед запуском изменяет приоритет процесса.
.TP
.BR -m | --make-pidfile
Этот флаг используется, если запускаемая программа не создаёт свой
собственный pid-файл.  При этом 
.B start-stop-daemon
непосредственно перед запуском процесса создаст файл, указанный в
параметре флага
.B --pidfile
и поместит в него pid запускаемого процесса.  Заметьте, что этот файл
не будет удалён при остановке программы.
.B ЗАМЕЧАНИЕ:
Эта возможность иногда может не работать: в основном это случается,
когда запускаемая программа выполняет fork().  Поэтому данный флаг
обычно бывает полезен только при использовании вместе с флагом
.BR --background .
.TP
.BR -v | --verbose
Выдавать подробные информационные сообщения.
.TP
.BR -H | --help
Выдать подсказку и завершиться.
.TP
.BR -V | --version
Выдать информацию о версии и завершиться.

.SH АВТОРЫ
Marek Michalkiewicz <marekm@i17linuxb.ists.pwr.wroc.pl>, основываясь
на версии, сделанной by Ian Jackson <ian@chiark.greenend.org.uk>.

Страница руководства by Klee Dienes <klee@mit.edu>, частично
переформатировано by Ian Jackson.

.SH ПЕРЕВОД
Перевёл с английского Виктор Вислобоков <victor_v@permonline.ru>.
Обновление и корректура: Alexey Mahotkin <alexm@hsys.msk.ru>.
